{% extends 'base.html' %}

{% block content %}
<div class="container" style="max-width: 1000px; margin: 3rem auto 4rem;">
    <!-- Hero Section -->
    <div class="card" style="text-align: center; background: linear-gradient(135deg, #F5D5E8 0%, #E8DFD5 100%); padding: 2rem; margin-bottom: 2rem;">
        <h1 style="color: var(--color-purple); font-size: 2rem; margin: 0 0 0.5rem 0;">ğŸ›¡ï¸ Admin Panel</h1>
        <p style="color: var(--color-gray-dark); font-size: 0.95rem; opacity: 0.8; margin: 0;">Manage police department users and access</p>
    </div>

    <!-- Flash Messages -->
    {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
            {% for category, msg in messages %}
            <div style="padding: 1rem; border-radius: var(--radius-lg); margin-bottom: 1.5rem; border-left: 4px solid var(--color-purple); background: rgba(232, 184, 198, 0.15); color: var(--color-purple);">
                <span style="font-weight: 600;">âœ“ {{ msg }}</span>
            </div>
            {% endfor %}
        {% endif %}
    {% endwith %}

    <!-- Main Grid -->
    <div style="display: grid; grid-template-columns: 1fr 2fr; gap: 2rem; margin-bottom: 2rem;">
        <!-- Add Police User Form -->
        <div class="card">
            <div style="padding: 1.5rem; border-bottom: 1px solid var(--color-gray-light);">
                <h3 style="color: var(--color-purple); font-size: 1.05rem; margin: 0;">â• Add Police User</h3>
            </div>
            
            <form method="POST" action="/admin/add_police" style="padding: 1.5rem;">
                <div style="margin-bottom: 1.5rem;">
                    <label style="display: block; font-weight: 600; color: var(--color-purple); font-size: 0.9rem; margin-bottom: 0.5rem;">Username</label>
                    <input type="text" name="username" class="form-control" required style="padding: 0.75rem; border: 1px solid var(--color-gray-light); border-radius: var(--radius-md); width: 100%;">
                </div>
                <div style="margin-bottom: 1.5rem;">
                    <label style="display: block; font-weight: 600; color: var(--color-purple); font-size: 0.9rem; margin-bottom: 0.5rem;">Password</label>
                    <input type="password" name="password" class="form-control" required style="padding: 0.75rem; border: 1px solid var(--color-gray-light); border-radius: var(--radius-md); width: 100%;">
                </div>
                <button type="submit" style="width: 100%; padding: 0.9rem; background: var(--color-purple); color: #FAFAF8; border: none; border-radius: var(--radius-lg); font-weight: 600; cursor: pointer; transition: all 0.25s ease;">
                    Create User
                </button>
            </form>
        </div>

        <!-- Police Users List -->
        <div class="card">
            <div style="padding: 1.5rem; border-bottom: 1px solid var(--color-gray-light);">
                <h3 style="color: var(--color-purple); font-size: 1.05rem; margin: 0;">ğŸ‘® Police Department Users</h3>
            </div>

            <div style="display: flex; flex-direction: column;">
                {% for user in police_users %}
                <div style="padding: 1.25rem; border-bottom: 1px solid var(--color-gray-light); display: flex; justify-content: space-between; align-items: center;">
                    <div>
                        <div style="font-weight: 600; color: var(--color-purple); margin-bottom: 0.25rem; font-size: 0.95rem;">{{ user[1] }}</div>
                        <div style="font-size: 0.8rem; color: var(--color-gray-dark); opacity: 0.7;">ID: {{ user[0] }}</div>
                    </div>
                    <a href="/admin/delete_police/{{ user[0] }}" onclick="return confirm('Are you sure you want to delete this user?');" style="padding: 0.6rem 1.25rem; background: var(--color-danger); color: white; border: none; border-radius: var(--radius-md); text-decoration: none; font-weight: 500; font-size: 0.85rem; cursor: pointer;">
                        Delete
                    </a>
                </div>
                {% else %}
                <div style="padding: 2rem; text-align: center; color: var(--color-gray-dark); opacity: 0.7;">
                    <div style="font-size: 2rem; margin-bottom: 0.75rem;">ğŸ‘¤</div>
                    <div>No police users yet</div>
                </div>
                {% endfor %}
            </div>
        </div>
    </div>

    <!-- System Info -->
    <div class="card" style="padding: 1.5rem; background: linear-gradient(135deg, var(--color-gray-light) 0%, #F8F6F2 100%);">
        <h3 style="color: var(--color-purple); font-size: 1rem; margin-bottom: 1rem;">â„¹ï¸ System Information</h3>
        <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 1rem;">
            <div style="padding: 1rem; background: white; border-radius: var(--radius-md); text-align: center;">
                <div style="font-size: 0.8rem; color: var(--color-gray-dark); opacity: 0.7; margin-bottom: 0.25rem;">Active Users</div>
                <div style="font-size: 1.5rem; font-weight: 700; color: var(--color-purple);">{{ police_users|length }}</div>
            </div>
            <div style="padding: 1rem; background: white; border-radius: var(--radius-md); text-align: center;">
                <div style="font-size: 0.8rem; color: var(--color-gray-dark); opacity: 0.7; margin-bottom: 0.25rem;">System Status</div>
                <div style="font-size: 1.5rem; font-weight: 700; color: #28A745;">âœ“ Active</div>
            </div>
            <div style="padding: 1rem; background: white; border-radius: var(--radius-md); text-align: center;">
                <div style="font-size: 0.8rem; color: var(--color-gray-dark); opacity: 0.7; margin-bottom: 0.25rem;">Last Updated</div>
                <div style="font-size: 0.9rem; font-weight: 500; color: var(--color-purple);">Today</div>
            </div>
        </div>
    </div>
</div>
{% endblock %}